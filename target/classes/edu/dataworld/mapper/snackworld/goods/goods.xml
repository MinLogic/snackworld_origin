<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="goods">
    <select id="goods.retrieve" parameterType="edu.dataworld.snackworld.goods.service.GoodsVO" resultType="edu.dataworld.snackworld.goods.service.GoodsVO">
        SELECT
            @ROWNUM :=  @ROWNUM+1 AS GOODS_SEQ
             , G.CAT_CODE
             , GI.SOTRED_FILE_NAME
             , G.GDS_NAME
             , G.GDS_PRICE
        FROM GOODS G
            LEFT JOIN GOODS_IMG_FILE GI
        ON G.GDS_ID = A.GDS_ID;
    </select>
    <insert id="goods.insert" parameterType="edu.dataworld.snackworld.goods.service.GoodsVO">
        INSERT
        INTO USER(
                   GDS_ID
                 , GDS_NAME
                 , GDS_PRICE
                 , CAT_CODE
                 , GDS_URL
                 , DEL_YN
        ) VALUES(
                  #{gdsId}
                , #{gdsName}
                , #{gdsPrice}
                , #{catCode}
                , #{gdsUrl}
                , 'N'
                )
    </insert>
    <update id="goods.update" parameterType="edu.dataworld.snackworld.goods.service.GoodsVO">
        UPDATE GOODS
        SET GDS_ID = #{gdsId}
          , GDS_NAME = #{gdsName}
          , GDS_PRICE = #{gdsPrice}
          , USER_NAME = #{userName}
          , CAT_CODE = #{catCode}
          , GDS_URL = #{gdsUrl}
          , DEL_YN = #{delYn}
    </update>
    <insert id="goods.fileUpload" parameterType="edu.dataworld.snackworld.goods.service.GoodsVO">
        INSERT
        INTO USER(
                   IMGFILE_ID
                 , GDS_ID
                 , ORIGIN_FILE_NAME
                 , STORED_FILE_NAME
                 , FILE_SIZE
                 , CREATE_DATE
                 , DEL_YN
        ) VALUES(
                  #{imgFileId}
                , #{gdsId}
                , #{originFileName}
                , #{storedFileName}
                , #{fileSize}
                , NOW()
                , 'N'
                )
    </insert>
</mapper>